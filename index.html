<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jadwal Shift 2025 - 2050</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Roboto", sans-serif;
        background: linear-gradient(135deg, #f5f7fa, #e4ecf5);
        color: #333;
        transition: background-color 0.3s, color 0.3s;
      }
      h1 {
        font-weight: 700;
        color: #1976d2;
      }
      h2 {
        font-weight: 600;
        color: #1565c0;
        margin-bottom: 15px;
      }
      .dark-mode {
        background: #121212 !important;
        color: #e0e0e0;
      }
      .dark-mode h1,
      .dark-mode h2 {
        color: #90caf9;
      }
      .dark-mode .table {
        background: #1e1e1e;
        color: #e0e0e0;
      }
      .table {
        border-radius: 12px;
        overflow: hidden;
      }
      .table thead {
        background: #1976d2;
        color: white;
      }
      .off {
        background: #ffebee !important;
        color: #d32f2f;
        font-weight: 600;
      }
      .shift1 {
        background: #e1f5fe !important;
        color: #0277bd;
      }
      .shift2 {
        background: #fff8e1 !important;
        color: #f57f17;
      }
      .shift3 {
        background: #ede7f6 !important;
        color: #4527a0;
      }
      .holiday {
        background: #fff59d !important;
        color: #000;
        font-weight: bold;
      }
      .filter-card {
        background: #ffffff;
        border-radius: 12px;
        padding: 15px;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.08);
      }
      .dark-mode .filter-card {
        background: #1f1f1f;
      }
      .alert-warning {
        font-weight: 500;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div class="container py-4">
      <h1 class="text-center mb-4">üìÖ JADWAL SHIFT 2025 - 2050 TEAM C</h1>

      <!-- Dark Mode -->
      <div class="mb-3 d-flex justify-content-end align-items-center">
        <label class="form-label me-2 fw-semibold">üåô Dark Mode</label>
        <input type="checkbox" id="darkModeToggle" class="form-check-input" />
      </div>

      <!-- Filter -->
      <div class="row mb-4 filter-card">
        <div class="col-md-6 mb-2">
          <label for="monthFilter" class="form-label fw-semibold"
            >üìå Pilih Bulan:</label
          >
          <select id="monthFilter" class="form-select">
            <option value="all" selected>-- Pilih Bulan --</option>
            <option value="0">Januari</option>
            <option value="1">Februari</option>
            <option value="2">Maret</option>
            <option value="3">April</option>
            <option value="4">Mei</option>
            <option value="5">Juni</option>
            <option value="6">Juli</option>
            <option value="7">Agustus</option>
            <option value="8">September</option>
            <option value="9">Oktober</option>
            <option value="10">November</option>
            <option value="11">Desember</option>
          </select>
        </div>
        <div class="col-md-6 mb-2">
          <label for="yearFilter" class="form-label fw-semibold"
            >üìå Pilih Tahun:</label
          >
          <select id="yearFilter" class="form-select">
            <option value="all" selected>-- Pilih Tahun --</option>
          </select>
        </div>
      </div>

      <div id="schedule" class="mt-3"></div>
    </div>

    <script>
      const shiftsPattern = [
        "1",
        "1",
        "1",
        "2",
        "2",
        "2",
        "OFF",
        "OFF",
        "3",
        "3",
        "3",
        "OFF",
      ];
      const shiftTimes = {
        1: "00:00-08:00",
        2: "08:00-16:00",
        3: "16:00-00:00",
      };
      const daysOfWeek = [
        "Minggu",
        "Senin",
        "Selasa",
        "Rabu",
        "Kamis",
        "Jumat",
        "Sabtu",
      ];
      const months = [
        { name: "Januari" },
        { name: "Februari" },
        { name: "Maret" },
        { name: "April" },
        { name: "Mei" },
        { name: "Juni" },
        { name: "Juli" },
        { name: "Agustus" },
        { name: "September" },
        { name: "Oktober" },
        { name: "November" },
        { name: "Desember" },
      ];

      const nationalHolidays = {
        "2025-01-01": "Tahun Baru 2025 Masehi",
        "2025-08-17": "Proklamasi Kemerdekaan RI",
        "2025-12-25": "Hari Raya Natal",
      };

      // isi dropdown tahun otomatis 2025‚Äì2050
      const yearSelect = document.getElementById("yearFilter");
      for (let y = 2025; y <= 2050; y++) {
        let opt = document.createElement("option");
        opt.value = y;
        opt.textContent = y;
        yearSelect.appendChild(opt);
      }

      function generateSchedule(selectedMonth, selectedYear) {
        let scheduleDiv = document.getElementById("schedule");

        // kalau user belum pilih bulan/tahun
        if (selectedMonth === "all" || selectedYear === "all") {
          scheduleDiv.innerHTML = `<div class="alert alert-warning">‚ö†Ô∏è Silakan pilih bulan dan tahun terlebih dahulu.</div>`;
          return;
        }

        let html = "";
        let shiftIndex = 0;
        const startDate = new Date(2025, 0, 1);
        const endDate = new Date(2050, 11, 31);

        let currentDate = new Date(startDate);
        let currentMonth = -1;
        let currentYear = -1;

        while (currentDate <= endDate) {
          let year = currentDate.getFullYear();
          let month = currentDate.getMonth();
          let day = currentDate.getDate();
          let dow = daysOfWeek[currentDate.getDay()];
          let dateString = currentDate.toISOString().split("T")[0];

          if (
            parseInt(selectedYear) === year &&
            parseInt(selectedMonth) === month
          ) {
            if (month !== currentMonth || year !== currentYear) {
              if (currentMonth !== -1) {
                html += `</tbody></table></div>`;
              }
              html += `<h2 class="text-center">${months[month].name} ${year}</h2>`;
              html += `<div class="table-responsive"><table class="table table-bordered text-center align-middle">
                        <thead><tr><th>Tanggal</th><th>Hari</th><th>Shift / Libur</th></tr></thead><tbody>`;
              currentMonth = month;
              currentYear = year;
            }

            const shift = shiftsPattern[shiftIndex];
            const holidayDesc = nationalHolidays[dateString];
            let cellContent, cellClass;

            if (holidayDesc) {
              cellContent =
                shift === "OFF"
                  ? `${holidayDesc} (${dow}, OFF)`
                  : `${holidayDesc} (${dow}, Shift ${shift} - ${shiftTimes[shift]})`;
              cellClass = "holiday";
            } else {
              cellContent =
                shift === "OFF"
                  ? `${dow}, OFF`
                  : `${dow}, Shift ${shift} (${shiftTimes[shift]})`;
              cellClass = shift === "OFF" ? "off" : `shift${shift}`;
            }

            html += `<tr><td>${day}</td><td>${dow}</td><td class="${cellClass}">${cellContent}</td></tr>`;
          }

          shiftIndex = (shiftIndex + 1) % shiftsPattern.length;
          currentDate.setDate(currentDate.getDate() + 1);
        }

        if (html !== "") html += `</tbody></table></div>`;
        scheduleDiv.innerHTML = html;
      }

      // Dark Mode
      document
        .getElementById("darkModeToggle")
        .addEventListener("change", function () {
          if (this.checked) {
            document.body.classList.add("dark-mode");
            localStorage.setItem("darkMode", "enabled");
          } else {
            document.body.classList.remove("dark-mode");
            localStorage.setItem("darkMode", "disabled");
          }
        });
      if (localStorage.getItem("darkMode") === "enabled") {
        document.body.classList.add("dark-mode");
        document.getElementById("darkModeToggle").checked = true;
      }

      // Event Filter
      document
        .getElementById("monthFilter")
        .addEventListener("change", function () {
          generateSchedule(
            this.value,
            document.getElementById("yearFilter").value
          );
        });
      document
        .getElementById("yearFilter")
        .addEventListener("change", function () {
          generateSchedule(
            document.getElementById("monthFilter").value,
            this.value
          );
        });

      // default pesan awal
      document.getElementById(
        "schedule"
      ).innerHTML = `<div class="alert alert-warning">‚ö†Ô∏è Silakan pilih bulan dan tahun terlebih dahulu.</div>`;
    </script>
  </body>
</html>
